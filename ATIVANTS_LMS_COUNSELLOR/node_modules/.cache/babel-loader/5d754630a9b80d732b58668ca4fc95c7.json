{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t(require(\"prop-types\"), require(\"react\")) : \"function\" == typeof define && define.amd ? define([\"prop-types\", \"react\"], t) : (e = e || self).AvatarEditor = t(e.PropTypes, e.React);\n}(this, function (e, s) {\n  \"use strict\";\n\n  function o(o, n) {\n    return new Promise(function (e, t) {\n      var i,\n          a = new Image();\n      a.onload = function () {\n        return e(a);\n      }, a.onerror = t, !1 == (null !== (i = o) && !!i.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i)) && n && (a.crossOrigin = n), a.src = o;\n    });\n  }\n\n  function a(t, e) {\n    var i,\n        a = Object.keys(t);\n    return Object.getOwnPropertySymbols && (i = Object.getOwnPropertySymbols(t), e && (i = i.filter(function (e) {\n      return Object.getOwnPropertyDescriptor(t, e).enumerable;\n    })), a.push.apply(a, i)), a;\n  }\n\n  function b(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var i = null != arguments[e] ? arguments[e] : {};\n      e % 2 ? a(Object(i), !0).forEach(function (e) {\n        babelHelpers.defineProperty(t, e, i[e]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : a(Object(i)).forEach(function (e) {\n        Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e));\n      });\n    }\n\n    return t;\n  }\n\n  function n(a) {\n    var o = function () {\n      if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n      if (Reflect.construct.sham) return !1;\n      if (\"function\" == typeof Proxy) return !0;\n\n      try {\n        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;\n      } catch (e) {\n        return !1;\n      }\n    }();\n\n    return function () {\n      var e,\n          t,\n          i = babelHelpers.getPrototypeOf(a);\n      return t = o ? (e = babelHelpers.getPrototypeOf(this).constructor, Reflect.construct(i, arguments, e)) : i.apply(this, arguments), babelHelpers.possibleConstructorReturn(this, t);\n    };\n  }\n\n  e = e && Object.prototype.hasOwnProperty.call(e, \"default\") ? e.default : e, s = s && Object.prototype.hasOwnProperty.call(s, \"default\") ? s.default : s;\n\n  function r(e) {\n    var a = !1;\n    return {\n      promise: new Promise(function (t, i) {\n        e.then(function (e) {\n          return a ? i({\n            isCanceled: !0\n          }) : t(e);\n        }, function (e) {\n          return i(a ? {\n            isCanceled: !0\n          } : e);\n        });\n      }),\n      cancel: function cancel() {\n        a = !0;\n      }\n    };\n  }\n\n  var h = !(\"undefined\" == typeof window || \"undefined\" == typeof navigator || !(\"ontouchstart\" in window || 0 < navigator.msMaxTouchPoints)),\n      c = \"undefined\" != typeof File,\n      t = {\n    touch: {\n      react: {\n        down: \"onTouchStart\",\n        mouseDown: \"onMouseDown\",\n        drag: \"onTouchMove\",\n        move: \"onTouchMove\",\n        mouseMove: \"onMouseMove\",\n        up: \"onTouchEnd\",\n        mouseUp: \"onMouseUp\"\n      },\n      native: {\n        down: \"touchstart\",\n        mouseDown: \"mousedown\",\n        drag: \"touchmove\",\n        move: \"touchmove\",\n        mouseMove: \"mousemove\",\n        up: \"touchend\",\n        mouseUp: \"mouseup\"\n      }\n    },\n    desktop: {\n      react: {\n        down: \"onMouseDown\",\n        drag: \"onDragOver\",\n        move: \"onMouseMove\",\n        up: \"onMouseUp\"\n      },\n      native: {\n        down: \"mousedown\",\n        drag: \"dragStart\",\n        move: \"mousemove\",\n        up: \"mouseup\"\n      }\n    }\n  },\n      u = h ? t.touch : t.desktop,\n      f = \"undefined\" != typeof window && window.devicePixelRatio ? window.devicePixelRatio : 1,\n      l = {\n    x: .5,\n    y: .5\n  },\n      i = function (e) {\n    babelHelpers.inherits(i, e);\n    var t = n(i);\n\n    function i(e) {\n      var f;\n      return babelHelpers.classCallCheck(this, i), f = t.call(this, e), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"state\", {\n        drag: !1,\n        my: null,\n        mx: null,\n        image: l\n      }), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"handleImageReady\", function (e) {\n        var t = f.getInitialSize(e.width, e.height);\n        t.resource = e, t.x = .5, t.y = .5, f.setState({\n          drag: !1,\n          image: t\n        }, f.props.onImageReady), f.props.onLoadSuccess(t);\n      }), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"clearImage\", function () {\n        f.canvas.getContext(\"2d\").clearRect(0, 0, f.canvas.width, f.canvas.height), f.setState({\n          image: l\n        });\n      }), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"handleMouseDown\", function (e) {\n        (e = e || window.event).preventDefault(), f.setState({\n          drag: !0,\n          mx: null,\n          my: null\n        });\n      }), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"handleMouseUp\", function () {\n        f.state.drag && (f.setState({\n          drag: !1\n        }), f.props.onMouseUp());\n      }), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"handleMouseMove\", function (e) {\n        var t, i, a, o, n, s, r, h, c, u, l, d, p, g, m, v;\n        e = e || window.event, !1 !== f.state.drag && (e.preventDefault(), a = {\n          mx: t = e.targetTouches ? e.targetTouches[0].pageX : e.clientX,\n          my: i = e.targetTouches ? e.targetTouches[0].pageY : e.clientY\n        }, v = f.props.rotate, v = (v %= 360) < 0 ? v + 360 : v, f.state.mx && f.state.my && (o = f.state.mx - t, n = f.state.my - i, s = f.state.image.width * f.props.scale, r = f.state.image.height * f.props.scale, c = (h = f.getCroppingRect()).x, u = h.y, c *= s, u *= r, l = function l(e) {\n          return e * (Math.PI / 180);\n        }, d = Math.cos(l(v)), g = u + -o * (p = Math.sin(l(v))) + n * d, m = {\n          x: (c + o * d + n * p) / s + 1 / f.props.scale * f.getXScale() / 2,\n          y: g / r + 1 / f.props.scale * f.getYScale() / 2\n        }, f.props.onPositionChange(m), a.image = b(b({}, f.state.image), m)), f.setState(a), f.props.onMouseMove(e));\n      }), babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f), \"setCanvas\", function (e) {\n        f.canvas = e;\n      }), f.canvas = null, f;\n    }\n\n    return babelHelpers.createClass(i, [{\n      key: \"componentDidMount\",\n      value: function value() {\n        this.props.disableHiDPIScaling && (f = 1);\n        var e,\n            t,\n            i = this.canvas.getContext(\"2d\");\n        this.props.image && this.loadImage(this.props.image), this.paint(i), document && (e = !!function () {\n          var t = !1;\n\n          try {\n            var e = Object.defineProperty({}, \"passive\", {\n              get: function get() {\n                t = !0;\n              }\n            });\n            window.addEventListener(\"test\", e, e), window.removeEventListener(\"test\", e, e);\n          } catch (e) {\n            t = !1;\n          }\n\n          return t;\n        }() && {\n          passive: !1\n        }, t = u.native, document.addEventListener(t.move, this.handleMouseMove, e), document.addEventListener(t.up, this.handleMouseUp, e), h && (document.addEventListener(t.mouseMove, this.handleMouseMove, e), document.addEventListener(t.mouseUp, this.handleMouseUp, e)));\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function value(e, t) {\n        this.props.image && this.props.image !== e.image || this.props.width !== e.width || this.props.height !== e.height ? this.loadImage(this.props.image) : this.props.image || t.image === l || this.clearImage();\n        var i = this.canvas.getContext(\"2d\");\n        i.clearRect(0, 0, this.canvas.width, this.canvas.height), this.paint(i), this.paintImage(i, this.state.image, this.props.border), e.image === this.props.image && e.width === this.props.width && e.height === this.props.height && e.position === this.props.position && e.scale === this.props.scale && e.rotate === this.props.rotate && t.my === this.state.my && t.mx === this.state.mx && t.image.x === this.state.image.x && t.image.y === this.state.image.y || this.props.onImageChange();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function value() {\n        var e;\n        document && (e = u.native, document.removeEventListener(e.move, this.handleMouseMove, !1), document.removeEventListener(e.up, this.handleMouseUp, !1), h && (document.removeEventListener(e.mouseMove, this.handleMouseMove, !1), document.removeEventListener(e.mouseUp, this.handleMouseUp, !1)));\n      }\n    }, {\n      key: \"isVertical\",\n      value: function value() {\n        return this.props.rotate % 180 != 0;\n      }\n    }, {\n      key: \"getBorders\",\n      value: function value(e) {\n        var t = 0 < arguments.length && void 0 !== e ? e : this.props.border;\n        return Array.isArray(t) ? t : [t, t];\n      }\n    }, {\n      key: \"getDimensions\",\n      value: function value() {\n        var e = this.props,\n            t = e.width,\n            i = e.height,\n            a = e.rotate,\n            o = e.border,\n            n = {},\n            s = this.getBorders(o),\n            r = babelHelpers.slicedToArray(s, 2),\n            h = r[0],\n            c = r[1],\n            u = t,\n            l = i;\n        return this.isVertical() ? (n.width = l, n.height = u) : (n.width = u, n.height = l), n.width += 2 * h, n.height += 2 * c, {\n          canvas: n,\n          rotate: a,\n          width: t,\n          height: i,\n          border: o\n        };\n      }\n    }, {\n      key: \"getImage\",\n      value: function value() {\n        var e = this.getCroppingRect(),\n            t = this.state.image;\n        e.x *= t.resource.width, e.y *= t.resource.height, e.width *= t.resource.width, e.height *= t.resource.height;\n        var i = document.createElement(\"canvas\");\n        this.isVertical() ? (i.width = e.height, i.height = e.width) : (i.width = e.width, i.height = e.height);\n        var a = i.getContext(\"2d\");\n        return a.translate(i.width / 2, i.height / 2), a.rotate(this.props.rotate * Math.PI / 180), a.translate(-i.width / 2, -i.height / 2), this.isVertical() && a.translate((i.width - i.height) / 2, (i.height - i.width) / 2), a.drawImage(t.resource, -e.x, -e.y), i;\n      }\n    }, {\n      key: \"getImageScaledToCanvas\",\n      value: function value() {\n        var e = this.getDimensions(),\n            t = e.width,\n            i = e.height,\n            a = document.createElement(\"canvas\");\n        return this.isVertical() ? (a.width = i, a.height = t) : (a.width = t, a.height = i), this.paintImage(a.getContext(\"2d\"), this.state.image, 0, 1), a;\n      }\n    }, {\n      key: \"getXScale\",\n      value: function value() {\n        var e = this.props.width / this.props.height,\n            t = this.state.image.width / this.state.image.height;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getYScale\",\n      value: function value() {\n        var e = this.props.height / this.props.width,\n            t = this.state.image.height / this.state.image.width;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getCroppingRect\",\n      value: function value() {\n        var e = this.props.position || {\n          x: this.state.image.x,\n          y: this.state.image.y\n        },\n            t = 1 / this.props.scale * this.getXScale(),\n            i = 1 / this.props.scale * this.getYScale(),\n            a = {\n          x: e.x - t / 2,\n          y: e.y - i / 2,\n          width: t,\n          height: i\n        },\n            o = 0,\n            n = 1 - a.width,\n            s = 0,\n            r = 1 - a.height;\n        return (this.props.disableBoundaryChecks || 1 < t || 1 < i) && (o = -a.width, s = -a.height, r = n = 1), b(b({}, a), {}, {\n          x: Math.max(o, Math.min(a.x, n)),\n          y: Math.max(s, Math.min(a.y, r))\n        });\n      }\n    }, {\n      key: \"loadImage\",\n      value: function value(e) {\n        var t;\n        c && e instanceof File ? this.loadingImage = r((t = e, new Promise(function (i, a) {\n          var e = new FileReader();\n          e.onload = function (e) {\n            try {\n              var t = o(e.target.result);\n              i(t);\n            } catch (e) {\n              a(e);\n            }\n          }, e.readAsDataURL(t);\n        }))).promise.then(this.handleImageReady).catch(this.props.onLoadFailure) : \"string\" == typeof e && (this.loadingImage = r(o(e, this.props.crossOrigin)).promise.then(this.handleImageReady).catch(this.props.onLoadFailure));\n      }\n    }, {\n      key: \"getInitialSize\",\n      value: function value(e, t) {\n        var i,\n            a,\n            o = this.getDimensions();\n        return t / e < o.height / o.width ? a = e * ((i = this.getDimensions().height) / t) : i = t * ((a = this.getDimensions().width) / e), {\n          height: i,\n          width: a\n        };\n      }\n    }, {\n      key: \"paintImage\",\n      value: function value(e, t, i, a) {\n        var o,\n            n = 3 < arguments.length && void 0 !== a ? a : f;\n        t.resource && (o = this.calculatePosition(t, i), e.save(), e.translate(e.canvas.width / 2, e.canvas.height / 2), e.rotate(this.props.rotate * Math.PI / 180), e.translate(-e.canvas.width / 2, -e.canvas.height / 2), this.isVertical() && e.translate((e.canvas.width - e.canvas.height) / 2, (e.canvas.height - e.canvas.width) / 2), e.scale(n, n), e.globalCompositeOperation = \"destination-over\", e.drawImage(t.resource, o.x, o.y, o.width, o.height), e.restore());\n      }\n    }, {\n      key: \"calculatePosition\",\n      value: function value(e, t) {\n        e = e || this.state.image;\n        var i = this.getBorders(t),\n            a = babelHelpers.slicedToArray(i, 2),\n            o = a[0],\n            n = a[1],\n            s = this.getCroppingRect(),\n            r = e.width * this.props.scale,\n            h = e.height * this.props.scale,\n            c = -s.x * r,\n            u = -s.y * h;\n        return this.isVertical() ? (c += n, u += o) : (c += o, u += n), {\n          x: c,\n          y: u,\n          height: h,\n          width: r\n        };\n      }\n    }, {\n      key: \"paint\",\n      value: function value(e) {\n        e.save(), e.scale(f, f), e.translate(0, 0), e.fillStyle = \"rgba(\" + this.props.color.slice(0, 4).join(\",\") + \")\";\n        var t,\n            i,\n            a,\n            o,\n            n,\n            s,\n            r,\n            h,\n            c = this.props.borderRadius,\n            u = this.getDimensions(),\n            l = this.getBorders(u.border),\n            d = babelHelpers.slicedToArray(l, 2),\n            p = d[0],\n            g = d[1],\n            m = u.canvas.height,\n            v = u.canvas.width,\n            c = Math.max(c, 0);\n        c = Math.min(c, v / 2 - p, m / 2 - g), e.beginPath(), t = e, o = v - 2 * (i = p), n = m - 2 * (a = g), 0 === (s = c) ? t.rect(i, a, o, n) : (r = o - s, h = n - s, t.translate(i, a), t.arc(s, s, s, Math.PI, 1.5 * Math.PI), t.lineTo(r, 0), t.arc(r, s, s, 1.5 * Math.PI, 2 * Math.PI), t.lineTo(o, h), t.arc(r, h, s, 2 * Math.PI, .5 * Math.PI), t.lineTo(s, n), t.arc(s, h, s, .5 * Math.PI, Math.PI), t.translate(-i, -a)), e.rect(v, 0, -v, m), e.fill(\"evenodd\"), e.restore();\n      }\n    }, {\n      key: \"render\",\n      value: function value() {\n        var e = this.props,\n            t = (e.scale, e.rotate, e.image, e.border, e.borderRadius, e.width, e.height, e.position, e.color, e.style),\n            i = (e.crossOrigin, e.onLoadFailure, e.onLoadSuccess, e.onImageReady, e.onImageChange, e.onMouseUp, e.onMouseMove, e.onPositionChange, e.disableBoundaryChecks, e.disableHiDPIScaling, babelHelpers.objectWithoutProperties(e, [\"scale\", \"rotate\", \"image\", \"border\", \"borderRadius\", \"width\", \"height\", \"position\", \"color\", \"style\", \"crossOrigin\", \"onLoadFailure\", \"onLoadSuccess\", \"onImageReady\", \"onImageChange\", \"onMouseUp\", \"onMouseMove\", \"onPositionChange\", \"disableBoundaryChecks\", \"disableHiDPIScaling\"])),\n            a = this.getDimensions(),\n            o = {\n          width: a.canvas.width,\n          height: a.canvas.height,\n          cursor: this.state.drag ? \"grabbing\" : \"grab\",\n          touchAction: \"none\"\n        },\n            n = {\n          width: a.canvas.width * f,\n          height: a.canvas.height * f,\n          style: b(b({}, o), t)\n        };\n        return n[u.react.down] = this.handleMouseDown, h && (n[u.react.mouseDown] = this.handleMouseDown), s.createElement(\"canvas\", babelHelpers.extends({\n          ref: this.setCanvas\n        }, n, i));\n      }\n    }]), i;\n  }(s.Component);\n\n  return babelHelpers.defineProperty(i, \"propTypes\", {\n    scale: e.number,\n    rotate: e.number,\n    image: e.oneOfType([e.string].concat(babelHelpers.toConsumableArray(c ? [e.instanceOf(File)] : []))),\n    border: e.oneOfType([e.number, e.arrayOf(e.number)]),\n    borderRadius: e.number,\n    width: e.number,\n    height: e.number,\n    position: e.shape({\n      x: e.number,\n      y: e.number\n    }),\n    color: e.arrayOf(e.number),\n    crossOrigin: e.oneOf([\"\", \"anonymous\", \"use-credentials\"]),\n    onLoadFailure: e.func,\n    onLoadSuccess: e.func,\n    onImageReady: e.func,\n    onImageChange: e.func,\n    onMouseUp: e.func,\n    onMouseMove: e.func,\n    onPositionChange: e.func,\n    disableBoundaryChecks: e.bool,\n    disableHiDPIScaling: e.bool\n  }), babelHelpers.defineProperty(i, \"defaultProps\", {\n    scale: 1,\n    rotate: 0,\n    border: 25,\n    borderRadius: 0,\n    width: 200,\n    height: 200,\n    color: [0, 0, 0, .5],\n    onLoadFailure: function onLoadFailure() {},\n    onLoadSuccess: function onLoadSuccess() {},\n    onImageReady: function onImageReady() {},\n    onImageChange: function onImageChange() {},\n    onMouseUp: function onMouseUp() {},\n    onMouseMove: function onMouseMove() {},\n    onPositionChange: function onPositionChange() {},\n    disableBoundaryChecks: !1,\n    disableHiDPIScaling: !1\n  }), i;\n});","map":{"version":3,"sources":["C:/Users/ACTIVANTS/Desktop/LMS Councellor/Activants_LMS_Counsellor/ATIVANTS_LMS_COUNSELLOR/node_modules/react-avatar-editor/dist/index.js"],"names":["e","t","exports","module","require","define","amd","self","AvatarEditor","PropTypes","React","s","o","n","Promise","i","a","Image","onload","onerror","match","crossOrigin","src","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","b","arguments","length","forEach","babelHelpers","defineProperty","getOwnPropertyDescriptors","defineProperties","Reflect","construct","sham","Proxy","Date","prototype","toString","call","getPrototypeOf","constructor","possibleConstructorReturn","hasOwnProperty","default","r","promise","then","isCanceled","cancel","h","window","navigator","msMaxTouchPoints","c","File","touch","react","down","mouseDown","drag","move","mouseMove","up","mouseUp","native","desktop","u","f","devicePixelRatio","l","x","y","inherits","classCallCheck","assertThisInitialized","my","mx","image","getInitialSize","width","height","resource","setState","props","onImageReady","onLoadSuccess","canvas","getContext","clearRect","event","preventDefault","state","onMouseUp","d","p","g","m","v","targetTouches","pageX","clientX","pageY","clientY","rotate","scale","getCroppingRect","Math","PI","cos","sin","getXScale","getYScale","onPositionChange","onMouseMove","createClass","key","value","disableHiDPIScaling","loadImage","paint","document","get","addEventListener","removeEventListener","passive","handleMouseMove","handleMouseUp","clearImage","paintImage","border","position","onImageChange","Array","isArray","getBorders","slicedToArray","isVertical","createElement","translate","drawImage","getDimensions","min","disableBoundaryChecks","max","loadingImage","FileReader","target","result","readAsDataURL","handleImageReady","catch","onLoadFailure","calculatePosition","save","globalCompositeOperation","restore","fillStyle","color","slice","join","borderRadius","beginPath","rect","arc","lineTo","fill","style","objectWithoutProperties","cursor","touchAction","handleMouseDown","extends","ref","setCanvas","Component","number","oneOfType","string","concat","toConsumableArray","instanceOf","arrayOf","shape","oneOf","func","bool"],"mappings":"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","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"prop-types\"),require(\"react\")):\"function\"==typeof define&&define.amd?define([\"prop-types\",\"react\"],t):(e=e||self).AvatarEditor=t(e.PropTypes,e.React)}(this,function(e,s){\"use strict\";function o(o,n){return new Promise(function(e,t){var i,a=new Image;a.onload=function(){return e(a)},a.onerror=t,!1==(null!==(i=o)&&!!i.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i))&&n&&(a.crossOrigin=n),a.src=o})}function a(t,e){var i,a=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)),a}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){babelHelpers.defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(a){var o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,i=babelHelpers.getPrototypeOf(a);return t=o?(e=babelHelpers.getPrototypeOf(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),babelHelpers.possibleConstructorReturn(this,t)}}e=e&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e,s=s&&Object.prototype.hasOwnProperty.call(s,\"default\")?s.default:s;function r(e){var a=!1;return{promise:new Promise(function(t,i){e.then(function(e){return a?i({isCanceled:!0}):t(e)},function(e){return i(a?{isCanceled:!0}:e)})}),cancel:function(){a=!0}}}var h=!(\"undefined\"==typeof window||\"undefined\"==typeof navigator||!(\"ontouchstart\"in window||0<navigator.msMaxTouchPoints)),c=\"undefined\"!=typeof File,t={touch:{react:{down:\"onTouchStart\",mouseDown:\"onMouseDown\",drag:\"onTouchMove\",move:\"onTouchMove\",mouseMove:\"onMouseMove\",up:\"onTouchEnd\",mouseUp:\"onMouseUp\"},native:{down:\"touchstart\",mouseDown:\"mousedown\",drag:\"touchmove\",move:\"touchmove\",mouseMove:\"mousemove\",up:\"touchend\",mouseUp:\"mouseup\"}},desktop:{react:{down:\"onMouseDown\",drag:\"onDragOver\",move:\"onMouseMove\",up:\"onMouseUp\"},native:{down:\"mousedown\",drag:\"dragStart\",move:\"mousemove\",up:\"mouseup\"}}},u=h?t.touch:t.desktop,f=\"undefined\"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,l={x:.5,y:.5},i=function(e){babelHelpers.inherits(i,e);var t=n(i);function i(e){var f;return babelHelpers.classCallCheck(this,i),f=t.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"state\",{drag:!1,my:null,mx:null,image:l}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"handleImageReady\",function(e){var t=f.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,f.setState({drag:!1,image:t},f.props.onImageReady),f.props.onLoadSuccess(t)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"clearImage\",function(){f.canvas.getContext(\"2d\").clearRect(0,0,f.canvas.width,f.canvas.height),f.setState({image:l})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"handleMouseDown\",function(e){(e=e||window.event).preventDefault(),f.setState({drag:!0,mx:null,my:null})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"handleMouseUp\",function(){f.state.drag&&(f.setState({drag:!1}),f.props.onMouseUp())}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"handleMouseMove\",function(e){var t,i,a,o,n,s,r,h,c,u,l,d,p,g,m,v;e=e||window.event,!1!==f.state.drag&&(e.preventDefault(),a={mx:t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:i=e.targetTouches?e.targetTouches[0].pageY:e.clientY},v=f.props.rotate,v=(v%=360)<0?v+360:v,f.state.mx&&f.state.my&&(o=f.state.mx-t,n=f.state.my-i,s=f.state.image.width*f.props.scale,r=f.state.image.height*f.props.scale,c=(h=f.getCroppingRect()).x,u=h.y,c*=s,u*=r,l=function(e){return e*(Math.PI/180)},d=Math.cos(l(v)),g=u+-o*(p=Math.sin(l(v)))+n*d,m={x:(c+o*d+n*p)/s+1/f.props.scale*f.getXScale()/2,y:g/r+1/f.props.scale*f.getYScale()/2},f.props.onPositionChange(m),a.image=b(b({},f.state.image),m)),f.setState(a),f.props.onMouseMove(e))}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(f),\"setCanvas\",function(e){f.canvas=e}),f.canvas=null,f}return babelHelpers.createClass(i,[{key:\"componentDidMount\",value:function(){this.props.disableHiDPIScaling&&(f=1);var e,t,i=this.canvas.getContext(\"2d\");this.props.image&&this.loadImage(this.props.image),this.paint(i),document&&(e=!!function(){var t=!1;try{var e=Object.defineProperty({},\"passive\",{get:function(){t=!0}});window.addEventListener(\"test\",e,e),window.removeEventListener(\"test\",e,e)}catch(e){t=!1}return t}()&&{passive:!1},t=u.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),h&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:\"componentDidUpdate\",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height?this.loadImage(this.props.image):this.props.image||t.image===l||this.clearImage();var i=this.canvas.getContext(\"2d\");i.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(i),this.paintImage(i,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:\"componentWillUnmount\",value:function(){var e;document&&(e=u.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),h&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:\"isVertical\",value:function(){return this.props.rotate%180!=0}},{key:\"getBorders\",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:\"getDimensions\",value:function(){var e=this.props,t=e.width,i=e.height,a=e.rotate,o=e.border,n={},s=this.getBorders(o),r=babelHelpers.slicedToArray(s,2),h=r[0],c=r[1],u=t,l=i;return this.isVertical()?(n.width=l,n.height=u):(n.width=u,n.height=l),n.width+=2*h,n.height+=2*c,{canvas:n,rotate:a,width:t,height:i,border:o}}},{key:\"getImage\",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var i=document.createElement(\"canvas\");this.isVertical()?(i.width=e.height,i.height=e.width):(i.width=e.width,i.height=e.height);var a=i.getContext(\"2d\");return a.translate(i.width/2,i.height/2),a.rotate(this.props.rotate*Math.PI/180),a.translate(-i.width/2,-i.height/2),this.isVertical()&&a.translate((i.width-i.height)/2,(i.height-i.width)/2),a.drawImage(t.resource,-e.x,-e.y),i}},{key:\"getImageScaledToCanvas\",value:function(){var e=this.getDimensions(),t=e.width,i=e.height,a=document.createElement(\"canvas\");return this.isVertical()?(a.width=i,a.height=t):(a.width=t,a.height=i),this.paintImage(a.getContext(\"2d\"),this.state.image,0,1),a}},{key:\"getXScale\",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:\"getYScale\",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:\"getCroppingRect\",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),i=1/this.props.scale*this.getYScale(),a={x:e.x-t/2,y:e.y-i/2,width:t,height:i},o=0,n=1-a.width,s=0,r=1-a.height;return(this.props.disableBoundaryChecks||1<t||1<i)&&(o=-a.width,s=-a.height,r=n=1),b(b({},a),{},{x:Math.max(o,Math.min(a.x,n)),y:Math.max(s,Math.min(a.y,r))})}},{key:\"loadImage\",value:function(e){var t;c&&e instanceof File?this.loadingImage=r((t=e,new Promise(function(i,a){var e=new FileReader;e.onload=function(e){try{var t=o(e.target.result);i(t)}catch(e){a(e)}},e.readAsDataURL(t)}))).promise.then(this.handleImageReady).catch(this.props.onLoadFailure):\"string\"==typeof e&&(this.loadingImage=r(o(e,this.props.crossOrigin)).promise.then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:\"getInitialSize\",value:function(e,t){var i,a,o=this.getDimensions();return t/e<o.height/o.width?a=e*((i=this.getDimensions().height)/t):i=t*((a=this.getDimensions().width)/e),{height:i,width:a}}},{key:\"paintImage\",value:function(e,t,i,a){var o,n=3<arguments.length&&void 0!==a?a:f;t.resource&&(o=this.calculatePosition(t,i),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(n,n),e.globalCompositeOperation=\"destination-over\",e.drawImage(t.resource,o.x,o.y,o.width,o.height),e.restore())}},{key:\"calculatePosition\",value:function(e,t){e=e||this.state.image;var i=this.getBorders(t),a=babelHelpers.slicedToArray(i,2),o=a[0],n=a[1],s=this.getCroppingRect(),r=e.width*this.props.scale,h=e.height*this.props.scale,c=-s.x*r,u=-s.y*h;return this.isVertical()?(c+=n,u+=o):(c+=o,u+=n),{x:c,y:u,height:h,width:r}}},{key:\"paint\",value:function(e){e.save(),e.scale(f,f),e.translate(0,0),e.fillStyle=\"rgba(\"+this.props.color.slice(0,4).join(\",\")+\")\";var t,i,a,o,n,s,r,h,c=this.props.borderRadius,u=this.getDimensions(),l=this.getBorders(u.border),d=babelHelpers.slicedToArray(l,2),p=d[0],g=d[1],m=u.canvas.height,v=u.canvas.width,c=Math.max(c,0);c=Math.min(c,v/2-p,m/2-g),e.beginPath(),t=e,o=v-2*(i=p),n=m-2*(a=g),0===(s=c)?t.rect(i,a,o,n):(r=o-s,h=n-s,t.translate(i,a),t.arc(s,s,s,Math.PI,1.5*Math.PI),t.lineTo(r,0),t.arc(r,s,s,1.5*Math.PI,2*Math.PI),t.lineTo(o,h),t.arc(r,h,s,2*Math.PI,.5*Math.PI),t.lineTo(s,n),t.arc(s,h,s,.5*Math.PI,Math.PI),t.translate(-i,-a)),e.rect(v,0,-v,m),e.fill(\"evenodd\"),e.restore()}},{key:\"render\",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.style),i=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,babelHelpers.objectWithoutProperties(e,[\"scale\",\"rotate\",\"image\",\"border\",\"borderRadius\",\"width\",\"height\",\"position\",\"color\",\"style\",\"crossOrigin\",\"onLoadFailure\",\"onLoadSuccess\",\"onImageReady\",\"onImageChange\",\"onMouseUp\",\"onMouseMove\",\"onPositionChange\",\"disableBoundaryChecks\",\"disableHiDPIScaling\"])),a=this.getDimensions(),o={width:a.canvas.width,height:a.canvas.height,cursor:this.state.drag?\"grabbing\":\"grab\",touchAction:\"none\"},n={width:a.canvas.width*f,height:a.canvas.height*f,style:b(b({},o),t)};return n[u.react.down]=this.handleMouseDown,h&&(n[u.react.mouseDown]=this.handleMouseDown),s.createElement(\"canvas\",babelHelpers.extends({ref:this.setCanvas},n,i))}}]),i}(s.Component);return babelHelpers.defineProperty(i,\"propTypes\",{scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(babelHelpers.toConsumableArray(c?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),crossOrigin:e.oneOf([\"\",\"anonymous\",\"use-credentials\"]),onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableBoundaryChecks:e.bool,disableHiDPIScaling:e.bool}),babelHelpers.defineProperty(i,\"defaultProps\",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1}),i});\n"]},"metadata":{},"sourceType":"script"}